ml2md
======

## 概要
このスクリプトは送られてきたメールをMDWikiで表示する事を想定したMarkdownファイルとして保存するものです。
DBレスの簡易情報共有システムとしての使用などを想定しています。

## 機能
* メールをMarkdownファイルに変換して保存します
* Markdownファイルは年月単位でファイル化します
* 年単位のプルダウンメニューをnavigation.mdファイルに追記します
* 画像ファイルが添付されたメールの場合、ページコンテンツとして画像が埋め込まれた状態で表示されます
* 画像ファイル以外が添付されたメールの場合、ファイルのダウンロードリンクが表示されます
* 受付可能な送信元メールアドレスを限定

## 使い方
投稿用メールアカウントへ送信

##環境構築
#### 前提事項
* postfixにてメールサーバを運用している（他のMTAで動作するかは未検証）
* rubyが動作する

#### 設定
1. ml2md.rbとml2md.ymlを任意の同一フォルダに格納
1. [ 投稿用メールアカウント ] を作成
1. /etc/aliasesに次のように指定

  ```sh
  # ML 
  [ 投稿用メールアカウント ]: "| /[ml2md.rb格納ディレクトリ]/ml2md.rb"
  ```
1. newaliases コマンドを実行
1. ml2md.rbに実行権限を付与
1. ml2md.yml を設定

  | ハッシュキー | 設定値 | 設定する値の型 |
  | --- | --- | --- |
  | ok\_addrs | 投稿を許可するメールアドレス | 文字列のリスト |
  | out\_path | Markdownファイル出力先ディレクトリ | 文字列 |

1.  Markdownファイル出力先ディレクトリにnavigation.mdファイルを配置する

## ライセンス等
MIT License  
Copyright 2015, risaiku  
http://risaiku.net  
https://github.com/risaiku/ml2md

